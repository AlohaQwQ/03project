(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{55024:function(){},43857:function(e,t,l){Promise.resolve().then(l.bind(l,33757))},33757:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return O}});var n=l(57437),o=l(52420),s=l(3145),a=l.n(s),i=l(19711),r=l(98430),d=l.n(r),c=l(2265),u=l(71126),m=l(54774),h=l.n(m);class x{static create(e){return new TextEncoder().encode(e)}static async validate(e,t){let{signature:l,publicKey:n}=e,o=d().decode(l),s=d().decode(n);return console.log(o,s),h().sign.detached.verify(t,o,s)}}let p=(0,l(24232).default)(()=>Promise.all([l.e(486),l.e(725)]).then(l.bind(l,30725)).then(e=>e.WalletMultiButton),{loadableGenerated:{webpack:()=>[null]},ssr:!1});function g(){let{connected:e,signMessage:t,publicKey:l,disconnecting:o,wallet:s,connecting:r}=(0,i.O)(),[m,h]=(0,c.useState)(!1),[g,v]=(0,c.useState)(0),f=(0,c.useCallback)(async()=>{h(!0);let e=await (0,u.getCsrfToken)();try{if(!l)throw Error("Wallet not connected!");if(!t)throw Error("Wallet does not support message signing!");let n=x.create(e),o=await t(n),s=d().encode(o),a={host:window.location.host,publicKey:null==l?void 0:l.toBase58(),nonce:e},i=await (0,u.signIn)("credentials",{message:JSON.stringify(a),signature:s,redirect:!1});if(null==i?void 0:i.error)throw Error("Error occured signing in")}catch(e){alert("Signing failed: ".concat(null==e?void 0:e.message))}finally{h(!1)}},[l,t]),{data:_,status:j}=(0,u.useSession)();return(0,c.useEffect)(()=>{var t,n,s,a;console.log("detected a change, wallet = ",null==l?void 0:l.toBase58()),console.log(null==_?void 0:null===(t=_.user)||void 0===t?void 0:t.publickey),console.log(null==l?void 0:l.toBase58()),console.log(e),(null==_?void 0:null===(n=_.user)||void 0===n?void 0:n.publickey)&&(null==l?void 0:l.toBase58())!==(null==_?void 0:null===(s=_.user)||void 0===s?void 0:s.publickey)&&e&&(console.log("reason 1",null==l?void 0:l.toBase58(),null==_?void 0:null===(a=_.user)||void 0===a?void 0:a.publickey),(0,u.signOut)()),!0==o&&(console.log("reason 2"),(0,u.signOut)()),!1==e&&"authenticated"==j&&(console.log("reason 3"),(0,u.signOut)())},[l,null==_?void 0:_.user,e,s,r,o]),(0,c.useEffect)(()=>{if(null==_?void 0:_.user){var e;v(null==_?void 0:null===(e=_.user)||void 0===e?void 0:e.slerfCount)}},[null==_?void 0:_.user]),(0,n.jsx)("div",{className:"p-[5%] w-full",children:(0,n.jsxs)("div",{style:{margin:"unset",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)("h2",{className:a().modalTitle,children:"Slerf Dao Voting!"}),(0,n.jsx)("div",{className:"max-w-[400px] text-center text-sm",children:"Note: To Vote you must first login!"}),m?"Loading...":(0,n.jsxs)(n.Fragment,{children:[!e&&(0,n.jsx)("div",{className:"float-right flex flex-col gap-2 justify-center items-center",children:(0,n.jsx)(p,{className:"bg-[#232826] rounded-full md:rounded-lg p-1 md:p-4 bg-brand-primary1-lighter-1 mx-auto md:mr-auto md:mb-10 md:place-content-center md:leading-normal md:h-10",children:"Connect Wallet"})}),e&&"authenticated"!==j&&(0,n.jsxs)("div",{className:"float-right flex flex-col gap-2 justify-center items-center",children:[(0,n.jsx)("button",{onClick:f,className:"bg-[#c7433a] text-[#EBE3D2] rounded-lg px-4 py-2 w-[200px]",children:"log In"}),(0,n.jsx)("div",{children:"or"}),(0,n.jsx)(p,{className:"bg-[#232826] rounded-full md:rounded-lg p-1 md:p-4 bg-brand-primary1-lighter-1 mx-auto md:mr-auto md:mb-10 md:place-content-center md:leading-normal md:h-10",children:"Change Wallet"})]}),e&&"authenticated"==j&&(0,n.jsxs)("div",{className:"float-right flex flex-col gap-2 justify-center items-center",children:[(0,n.jsx)(p,{className:"bg-[#232826] rounded-full md:rounded-lg p-1 md:p-4 bg-brand-primary1-lighter-1 mx-auto md:mr-auto md:mb-10 md:place-content-center md:leading-normal md:h-10",children:"Change Wallet"}),g<1&&(null==_?void 0:_.user)?(0,n.jsx)("div",{children:"No SLERF NFTs Detected. Connect another Wallet"}):(0,n.jsx)("div",{children:"Successfully Signed In."})]})]})]})})}var v=l(91268),f=l.n(v),_=l(8792),j=l(98245),b=l.n(j);function N(){return(0,n.jsx)("div",{className:"w-full ",children:(0,n.jsxs)("div",{className:"mx-auto w-[120px]",children:[(0,n.jsx)("img",{className:"w-[100px] cursor-pointer mx-auto ",src:"/images/loading.gif","data-tooltip-id":"tt1",id:"tt1"}),"Loading..."]})})}function w(e){var t;let{vote:l,modalOpen:o,setModalOpen:s,poll:i}=e,[r,d]=(0,c.useState)(""),[m,h]=(0,c.useState)(!0),[x,p]=(0,c.useState)(!1),[g,v]=(0,c.useState)(),{data:f,status:j}=(0,u.useSession)();return(0,c.useEffect)(()=>{var e,t;if("authenticated"!==j){d("Must Log In to Vote"),p(!1),h(!1);return}if(fetch("/api/get-my-votes?userId=".concat(null===(e=f.user)||void 0===e?void 0:e.id,"&pollId=").concat(i.id)).then(e=>{e.json().then(e=>{p(!e.voted),e.voted?(d("Already voted in this Poll"),v(e.votedFor)):d(""),h(!1)})}),(null===(t=f.user)||void 0===t?void 0:t.serlfCount)==0){d("Must hold an NFT to vote"),p(!1),h(!1);return}},[null==f?void 0:f.user]),(0,n.jsxs)(b(),{ariaHideApp:!1,isOpen:o,contentLabel:"onRequestClose Example",onRequestClose:e=>s(!1),shouldCloseOnOverlayClick:!0,className:a().modal,overlayClassName:a().overlay,closeTimeoutMS:500,children:[(0,n.jsx)("img",{alt:"close modal",className:a().modalClose,src:"/icons/x.svg",onClick:e=>s(()=>!1)}),(0,n.jsx)("h2",{className:a().modalTitle,children:i.title}),(0,n.jsx)("span",{className:"text-base",children:i.description}),(0,n.jsx)("div",{className:a().modalOptions,children:i&&(null===(t=i.VoteOption)||void 0===t?void 0:t.map(e=>(0,n.jsxs)("div",{color:"--base-lightshade-base",style:{margin:"unset",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"},children:[e.image&&(0,n.jsx)("img",{src:e.image,className:a().image}),(0,n.jsx)("div",{className:"text-base",children:e.name}),(0,n.jsx)("p",{className:"text-sm",children:e.description}),(0,n.jsxs)("div",{style:{marginTop:"auto"},children:[(0,n.jsx)("div",{children:e.description.length>110?(0,n.jsx)(_.default,{href:"#",children:"Read More"}):""}),m?(0,n.jsx)(N,{}):(0,n.jsx)("button",{disabled:!x,style:{opacity:x?1:.5},className:a().pollButton,onClick:t=>{var l;return l=e.id,void(h(!0),fetch("/api/cast-vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({optionId:l})}).then(e=>{e.json().then(e=>{(null==e?void 0:e.error)?(p(!1),d(e.error)):(d("Successfully Voted! Voting Power: ".concat(e.voteWeight)),p(!1),v(l)),h(!1)})}).catch(e=>{d(e),console.error("Error:",e),setCreatingTeam(!1)}))},children:g==e.id?"Voted For":x?"Vote!":"Not Voted"})]})]},e.id)))}),(0,n.jsx)("span",{className:a().modalError,children:r})]})}var y=l(4064),E=e=>{let{date:t,style:l,countDownClass:o}=e,[s,a]=(0,c.useState)({days:0,hours:0,minutes:0,seconds:0});return(0,c.useEffect)(()=>{let e=setInterval(()=>{let l=new Date(t).getTime()-new Date().getTime();l<0?clearInterval(e):a({days:Math.floor(l/864e5),hours:Math.floor(l%864e5/36e5),minutes:Math.floor(l%36e5/6e4),seconds:Math.floor(l%6e4/1e3)})},1e3);return()=>clearInterval(e)},[]),(0,n.jsx)("div",{style:l,children:(0,n.jsx)("p",{className:o||f().countdown,children:"".concat(s.days,":").concat(s.hours,":").concat(s.minutes,":").concat(s.seconds)})})};function S(){var e;let[t,l]=(0,c.useState)(!1),[o,s]=(0,c.useState)(!1),[a,i]=(0,c.useState)(!1),[r,d]=(0,c.useState)(0),{data:m,status:h}=(0,u.useSession)();return(0,c.useEffect)(()=>{var e;async function n(){i(!0);try{let e=await fetch("/api/get-polls?active=1").then(async e=>await e.json()),t=new Date;e.sort((e,t)=>e.id-t.id);let n=e.findIndex(e=>new Date(e.endDate)>t);if(-1==n){i(!1);return}let o=new Date(e[n].endDate).toISOString(),s=0;e[n].VoteOption.forEach(e=>{s+=e.voteWeight}),d(s),e[n].VoteOption=e[n].VoteOption.map(e=>e.description.length>120?{...e,description:e.description.slice(0,118)+"..."}:{...e,description:e.description}),l({...e[n],endDate:o})}catch(e){console.error(e)}finally{i(!1)}}"authenticated"==h&&!t&&(null==m?void 0:null===(e=m.user)||void 0===e?void 0:e.slerfCount)>0&&n()},[null==m?void 0:m.user]),(0,n.jsxs)("div",{title:"Live Poll",style:{flex:"1 0 50%",minWidth:"200px",boxShadow:"rgb(70 56 49 / 30%) 0px 8px 24px",borderRadius:"10px",maxWidth:"500px",marginLeft:"auto",marginRight:"auto",background:"white"},children:[(0,n.jsx)("div",{className:"text-2xl w-full",style:{textAlign:"center"},children:"LIVE POLL"}),(0,n.jsxs)("div",{className:f().poll,children:[(0,n.jsxs)("div",{className:f().pollOptions,children:[!a&&(null==m?void 0:null===(e=m.user)||void 0===e?void 0:e.slerfCount)==0&&(0,n.jsx)("div",{className:"text-center",children:"No SLERF NFTS detected"}),!a&&"authenticated"!=h&&(0,n.jsx)("div",{className:"text-center",children:"Log In First"}),!a&&(null==m?void 0:m.user.slerfCount)>0&&!t&&(0,n.jsx)("div",{className:"text-center",children:"No Polls currently open "}),!a&&t&&(null==m?void 0:m.user.slerfCount)>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{modalOpen:o,setModalOpen:s,poll:t}),(0,n.jsx)("img",{src:t.image,style:{width:"80%",marginLeft:"auto",marginRight:"auto"}}),(0,n.jsxs)("div",{style:{display:"flex",padding:"5px"},children:[(0,n.jsx)("p",{children:t.title}),(0,n.jsx)(E,{style:{marginLeft:"auto"},date:t.endDate})]}),t.VoteOption.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:f().pollOption,children:[(0,n.jsx)("div",{children:e.name}),(0,n.jsxs)("div",{style:{marginLeft:"auto"},children:[e.voteWeight," (",(e.voteWeight>0?e.voteWeight/r*100:0).toFixed(2),"%",")"]})]}),(0,n.jsx)(y.Z,{completed:e.voteWeight/r*100,isLabelVisible:!1,baseBgColor:"var(--back)",bgColor:"#c7443a"})]},e.id))]}),a&&(0,n.jsx)(N,{})]}),!a&&t&&(null==m?void 0:m.user.slerfCount)>0&&(0,n.jsx)("button",{className:f().pollButton,onClick:e=>s(()=>!0),children:"Vote Now"})]})]})}function O(){let{data:e,status:t}=(0,u.useSession)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{className:"headerMain",pageName:"vote"}),(0,n.jsx)("main",{className:"mainStatic",children:(0,n.jsxs)("div",{className:"voteParent",children:["authenticated"!==t,(0,n.jsx)(g,{}),(0,n.jsx)(S,{}),(0,n.jsxs)("div",{className:"livePoll",children:[(0,n.jsx)("h1",{className:"text-2xl text-centre",children:"How Does SLERF Dao Voting Work?"}),(0,n.jsxs)("ol",{className:"list-decimal text-sm",children:[(0,n.jsx)("li",{children:"Each SLERF NFT that you hold represents 1 vote within SLERF DAO proposals."}),(0,n.jsx)("li",{children:"Each NFT can only be used to vote once. This means if you transfer your NFT to another wallet after voting it cannot be used to vote again. This goes for sales as well."}),(0,n.jsx)("li",{children:"Votes cannot be changed."})]})]})]})})]})}},52420:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var n=l(57437),o=l(8792),s=l(2265);function a(e){let{className:t,pageName:l}=e;function a(e){return l==e?"active":""}return function(){let[e,t]=(0,s.useState)({width:void 0,height:void 0});(0,s.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[])}(),(0,n.jsxs)("div",{className:t,children:[(0,n.jsx)(o.default,{href:"/",children:(0,n.jsx)("div",{className:"headerNew-item ".concat(a("home")),children:"HOME"})}),(0,n.jsx)(o.default,{href:"/integrations",children:(0,n.jsx)("div",{className:"headerNew-item ".concat(a("integrations")),children:"INTEGRATIONS"})}),(0,n.jsx)(o.default,{href:"/slerfdex",children:(0,n.jsx)("div",{className:"headerNew-item ".concat(a("slerfdex")),children:"SLERFDEX"})}),(0,n.jsx)(o.default,{href:"/history",children:(0,n.jsx)("div",{className:"headerNew-item ".concat(a("history")),children:"HISTORY"})}),(0,n.jsx)(o.default,{href:"/vote",children:(0,n.jsx)("div",{className:"headerNew-item ".concat(a("vote")),children:"VOTE"})}),(0,n.jsx)(o.default,{href:"/disclaimer",children:(0,n.jsx)("div",{className:"headerNew-item ".concat(a("vote")),children:"DISCLAIMER"})})]})}function i(e){let{className:t,pageName:l}=e,[a,i]=(0,s.useState)(!1),r=e=>l===e?"active":"";return(0,n.jsxs)(n.Fragment,{children:["home"!==l&&(0,n.jsx)("img",{src:"/images/home/text.png",className:"w-2/5 mt-5"}),(0,n.jsx)("div",{className:"bm-burger-button",onClick:()=>i(e=>!e),children:(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"bm-burger-bars absolute h-1/5 left-0 right-0 opacity-100 bg-current",style:{top:"0%"}}),(0,n.jsx)("span",{className:"bm-burger-bars absolute h-1/5 left-0 right-0 opacity-100 bg-current",style:{top:"40%"}}),(0,n.jsx)("span",{className:"bm-burger-bars absolute h-1/5 left-0 right-0 opacity-100 bg-current",style:{top:"80%"}})]})}),(0,n.jsxs)("div",{className:"fixed top-0 right-0 h-full w-full bg-[#ee9436] text-white transform transition-transform duration-300 ease-in-out ".concat(a?"translate-x-0":"translate-x-full"),style:{zIndex:1001},children:[(0,n.jsx)("button",{onClick:()=>i(!1),className:"absolute top-4 right-8 text-white text-[50px] font-bold","aria-label":"Close menu",children:"\xd7"}),(0,n.jsx)("div",{className:"flex flex-col items-center pt-16 h-full",children:[{href:"/",label:"HOME"},{href:"/integrations",label:"INTEGRATIONS"},{href:"/slerfdex",label:"SLERFDEX"},{href:"/history",label:"HISTORY"},{href:"/vote",label:"VOTE"},{href:"/disclaimer",label:"DISCLAIMER"}].map((e,t)=>(0,n.jsx)(o.default,{href:e.href,children:(0,n.jsx)("div",{className:"headerNew-item p-4 text-center text-2xl ".concat(r(e.href.slice(1)||"home")),onClick:()=>i(!1),children:e.label})},t))})]}),a&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{zIndex:1e3},onClick:()=>i(!1)})]})}var r=l(40135);function d(e){let{className:t,pageName:l}=e,o=(0,r.i)();return(null==o?void 0:o.width)&&(null==o?void 0:o.width)<800?(0,n.jsx)(i,{className:t,pageName:l}):(0,n.jsx)(a,{className:t,pageName:l})}},40135:function(e,t,l){"use strict";l.d(t,{i:function(){return o}});var n=l(2265);function o(){let[e,t]=(0,n.useState)({width:void 0,height:void 0});return(0,n.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}},3145:function(e){e.exports={modal:"modal_modal__gGnuY",modalTitle:"modal_modalTitle__iwOPf",currency:"modal_currency__Hh3R9",modalSwapper:"modal_modalSwapper__JCHFA",pollButton:"modal_pollButton__nYQPx",changeCurrency:"modal_changeCurrency__PpMj0",currencyOption:"modal_currencyOption__6vUJY",selected:"modal_selected__uOVfR",iconPanel:"modal_iconPanel__WSOr2",imageButton:"modal_imageButton__mOAsR",bonus:"modal_bonus__i2Fvz",bonusIcon:"modal_bonusIcon__lWXKE",overlay:"modal_overlay__CwfQM",nameBox:"modal_nameBox__osU_F",modalClose:"modal_modalClose__oIxEd",modalError:"modal_modalError__ui8ir",modalOptions:"modal_modalOptions__kRyv6",image:"modal_image__z4MfW",counter:"modal_counter__5yNqn",inputAmount:"modal_inputAmount__KnhRr",balance:"modal_balance__l14gE",inputSol:"modal_inputSol__2PDbw",bronuts:"modal_bronuts__CD9AF"}},91268:function(e){e.exports={pollOptions:"pollwidget_pollOptions__Leq63",pollOption:"pollwidget_pollOption__t11ED",pollButton:"pollwidget_pollButton__R0HbQ",poll:"pollwidget_poll__YQUeE",countdown:"pollwidget_countdown__cwPU5",pastPollWidget:"pollwidget_pastPollWidget__l2UDg",pastPollImage:"pollwidget_pastPollImage__FjH9d",pastPollBar:"pollwidget_pastPollBar__f_3Jk",pollParent:"pollwidget_pollParent__ZTrc_",pollEntry:"pollwidget_pollEntry__HFUF4",pastPollButtonDiv:"pollwidget_pastPollButtonDiv__LGD6s"}}},function(e){e.O(0,[792,113,245,176,971,69,744],function(){return e(e.s=43857)}),_N_E=e.O()}]);